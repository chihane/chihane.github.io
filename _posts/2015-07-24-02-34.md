---
layout: post
title: 几个小问题
date: 2015-07-24 02:34:00
categories: cnblogs
---

<p>1. Gson解析的json字符串中如果有数组类型，在生成模型中声明时&mdash;&mdash;</p>
<p>第一，要手动初始化列表实例，像这样：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">public</span> List&lt;Models&gt; models = <span style="color: #0000ff;">new</span> ArrayList&lt;Models&gt;();</pre>
</div>
<p>如果只声明不初始化，解析完成后列表还是空值。</p>
<p>第二，不能用接口声明，如果像上面那行代码一样，解析完成后列表的大小是0。应该这样：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">public</span> ArrayList&lt;Models&gt; models = <span style="color: #0000ff;">new</span> ArrayList&lt;Models&gt;();</pre>
</div>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>2. Android Studio只是不能开发JNI，不是不能用。要用JNI库的话只需要把so文件复制到libs文件夹下，然后在build.gradle文件的android标签里加入</p>
<div class="cnblogs_code">
<pre>sourceSets {
    main {
        jniLibs.srcDirs = ['libs']
    }
}</pre>
</div>
<p>即可。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('7dadd381-3da6-4587-98bc-7081f4679840')"><img id="code_img_closed_7dadd381-3da6-4587-98bc-7081f4679840" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_7dadd381-3da6-4587-98bc-7081f4679840" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('7dadd381-3da6-4587-98bc-7081f4679840',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_7dadd381-3da6-4587-98bc-7081f4679840" class="cnblogs_code_hide">
<pre>apply plugin: 'com.android.application'

android {
    compileSdkVersion 22
    buildToolsVersion "22.0.1"

    defaultConfig {
        applicationId "mlxy.toyou"
        minSdkVersion 15
        targetSdkVersion 22
        versionCode 1
        versionName "1.0"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    sourceSets {
        main {
            jniLibs.srcDirs = ['libs']
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:22.0.+'
}</pre>
</div>
<span class="cnblogs_code_collapse">就像这样</span></div>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>3. 给EditText绑定OnKeyListener的时候要注意，onKey方法在按键按下时调用一次，抬起时还会调用一次，如果只做了键位的判断会导致同样的事做两遍。</p>
<p>解决办法很简单，不细说。</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">if</span> (keyCode == KeyEvent.KEYCODE_ENTER &amp;&amp; event.getAction() == KeyEvent.ACTION_UP) {</pre>
</div>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>4. 要让ListView显示多种列表项类型不要紧，重写getItemViewType方法就可以，但是要注意，这个方法的返回值，也就是自己声明的列表项类型值要从0开始，不然会导致</p>
<div class="cnblogs_code">
<pre>java.lang.ArrayIndexOutOfBoundsException: length=2; index=2 </pre>
</div>
<p>&nbsp;</p>
<hr />
<p>&nbsp;</p>
<p>暂时就这样。</p>

<div align=right><a href="https://github.com/mlxy"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>