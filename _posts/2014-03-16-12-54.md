---
layout: post
title: 工厂模式Patch V1.01
date: 2014-03-16 12:54:00
categories: cnblogs
---

<p>出去吃顿饭的功夫就发现了两个问题。</p>
<p>&nbsp;</p>
<p>第一个：</p>
<p>新建实例的时候直接用c.newInstance()会不会导致程序在c不存在的时候出错？</p>
<p>测试了一下，如果c不存在的话，场景类里会报错，那看来还是可以直接这么用，不需要Class.forName()。</p>
<p>这段代码会报错：</p>
<div class="cnblogs_code">
<pre>Product twoThreeThree = factory.createProduct(Product233.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
twoThreeThree.printName();</span></pre>
</div>
<p>&nbsp;</p>
<p>另一个：</p>
<p>我一开始回忆着敲代码的时候把生产方法设成了静态函数，但是后来想到要new工厂的实例，就把static关键字删掉了。</p>
<p>但是刚才出门之后发现，我完全可以不用实例化工厂类啊。</p>
<p>这样的话，方法头加一个关键字，要用的时候只要</p>
<div class="cnblogs_code">
<pre>Product one = ProductFactory.createProduct(Product1.<span style="color: #0000ff;">class</span>);</pre>
</div>
<p>就可以了。</p>
<p>&nbsp;</p>
<p>第三个：</p>
<p>生产方法的参数其实不一定是class，是字符串或者是Enum类型都可以，Enum还更好用一点。</p>
<p>在方法内用参数获取相应的类就行了。</p>
<p>先用空值初始化要返回的对象，如果找不到那个类就返回null就可以了。</p>

<div align=right><a href="https://github.com/mlxy"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>