---
layout: post
title: 贪吃蛇之于程序员就像巴大蝴之于小智
date: 2014-02-02 15:42:00
categories: cnblogs
---

<p>　　对的，出了新手村就不用了的那种。</p>
<p>　　<a href="http://files.cnblogs.com/JavaForNow/Snake.rar">惯例发包，还是加了rr3，明明根本没人下。</a></p>
<p>　　里面三个文件，一个是纯打包的jar，一个是能能运行的jar，一个是能运行的exe，我测试没问题，运行不了请检查环境变量和人品。</p>
<p>　　不过按照习惯，最后还是会把所有代码直接发出来的。</p>
<p>&nbsp;</p>
<p>　　第一次用了下枚举类，还是挺简单的，百度随便搜两篇博客就懂了，用起来也挺智能，最重要的是用1234来表示方向太low了。</p>
<p>　　像这样：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">enum</span> Orientation {UP, DOWN, LEFT, RIGHT}</pre>
</div>
<p>　　之后用起来直接当常量引用就行了(比如Orientation.UP)，不过数据类型是Orientation要注意。</p>
<p>&nbsp;</p>
<p>　　我之前一直不敢写这玩意是因为我不知道怎么用格子来表示坐标，直到今天才知道我想多了，格子的左上角就是坐标，剩下的是格子边长的事。</p>
<p>　　</p>
<p>　　我觉得自己的代码已经挺好看的了，反正比网上某些一个java文件搞定一切的要好一点。</p>
<p>&nbsp;</p>
<p>　　还有一个bug，之前也看到别人有。</p>
<p>　　描述一下的话就是我模拟贪吃蛇移动的延迟使用的线程睡眠方法，像这样：</p>
<div class="cnblogs_code">
<pre>Thread.sleep(100)</pre>
</div>
<p>　　这带来了一个什么问题呢，就是，虽然我在程序里做了判断，不允许玩家往后退，但是如果你手够快，能在线程睡着的这段时间里连续改两次方向，从结果来说就是往后退了。</p>
<p>　　举个例子：</p>
<p>　　　　蛇正在往右走，你按了方向左，这没有任何作用，因为我加了判断，阻止你这么做。</p>
<p>　　　　但是你在100毫秒内先按上，方向就变成了上，但是因为线程还在睡，所以蛇的位置没有更新，这时你又按了左，这样是允许的，因为你是从上变成左，并不是掉头。</p>
<p>　　　　结果就是蛇开始往左跑，如果蛇身只有两节，那就是自由掉头，如果大于二，蛇会咬到自己的第三节身体导致游戏失败。</p>
<p>　　&hellip;&hellip;我也不知道该怎么解决这个bug&hellip;&hellip;以后再说&hellip;&hellip;</p>
<p>&nbsp;</p>
<p>　　就敲着这段字的时间里我发现了一个问题，我是直接实现KeyListener接口的，这个是我抄人家的我错了。</p>
<p>　　我的做法是做成内部类然后继承KeyAdapter的，直接用接口会多出来两个用不着的方法，太难看了。</p>
<p>　　但是懒得重新打包，也不想更新版本号了，一会下边发的代码会是新版本的代码。</p>
<p>&nbsp;</p>
<p>　　一个下午加上一个晚上搞定一个贪吃蛇，我还是有点进步的。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('100578e1-3112-4595-a9a7-c1e9c92da717')"><img id="code_img_closed_100578e1-3112-4595-a9a7-c1e9c92da717" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_100578e1-3112-4595-a9a7-c1e9c92da717" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('100578e1-3112-4595-a9a7-c1e9c92da717',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_100578e1-3112-4595-a9a7-c1e9c92da717" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> snake;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #008000;">/**</span> 
<span style="color: #008080;"> 4</span> <span style="color: #008000;"> * 枚举类。
</span><span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 定义了四个方向。
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> mlxy
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.0
</span><span style="color: #008080;"> 9</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">enum</span><span style="color: #000000;"> Orientation {
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    UP, DOWN, LEFT, RIGHT
</span><span style="color: #008080;">12</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Orientation.java</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('6313dcb9-8728-4123-b070-bfab68dc1c37')"><img id="code_img_closed_6313dcb9-8728-4123-b070-bfab68dc1c37" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_6313dcb9-8728-4123-b070-bfab68dc1c37" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6313dcb9-8728-4123-b070-bfab68dc1c37',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_6313dcb9-8728-4123-b070-bfab68dc1c37" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> snake;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 4</span> <span style="color: #008000;"> * 运行类。
</span><span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 内容很简单，初始化框架。
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> mlxy
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.0
</span><span style="color: #008080;"> 9</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Run {
</span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
</span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">new</span><span style="color: #000000;"> MainFrame();
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">14</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Run.java</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('3754dfc3-84aa-48c8-8791-ead4e1167e4a')"><img id="code_img_closed_3754dfc3-84aa-48c8-8791-ead4e1167e4a" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_3754dfc3-84aa-48c8-8791-ead4e1167e4a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3754dfc3-84aa-48c8-8791-ead4e1167e4a',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_3754dfc3-84aa-48c8-8791-ead4e1167e4a" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> snake;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.swing.JFrame;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #008000;">/**</span>
<span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 主框架类。
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;"> * 初始化框架内容和相关属性。
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 9</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> mlxy
</span><span style="color: #008080;">10</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.0
</span><span style="color: #008080;">11</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">12</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> MainFrame <span style="color: #0000ff;">extends</span><span style="color: #000000;"> JFrame {
</span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">long</span> serialVersionUID = 3693516591938222507L<span style="color: #000000;">;
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    GamePad gamePad;
</span><span style="color: #008080;">15</span>     
<span style="color: #008080;">16</span> <span style="color: #000000;">    MainFrame() {
</span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">this</span>.gamePad = <span style="color: #0000ff;">new</span><span style="color: #000000;"> GamePad();
</span><span style="color: #008080;">18</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.add(gamePad);
</span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">this</span>.setResizable(<span style="color: #0000ff;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.pack();
</span><span style="color: #008080;">21</span>         
<span style="color: #008080;">22</span>         <span style="color: #0000ff;">this</span>.setTitle("Snake"<span style="color: #000000;">);
</span><span style="color: #008080;">23</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
</span><span style="color: #008080;">24</span>         <span style="color: #0000ff;">this</span>.setLocationRelativeTo(<span style="color: #0000ff;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">this</span>.setVisible(<span style="color: #0000ff;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">27</span> }</pre>
</div>
<span class="cnblogs_code_collapse">MainFrame.java</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('59f21cb1-1501-4e1c-aa18-8d462a7daace')"><img id="code_img_closed_59f21cb1-1501-4e1c-aa18-8d462a7daace" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_59f21cb1-1501-4e1c-aa18-8d462a7daace" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('59f21cb1-1501-4e1c-aa18-8d462a7daace',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_59f21cb1-1501-4e1c-aa18-8d462a7daace" class="cnblogs_code_hide">
<pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> snake;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.awt.Color;
</span><span style="color: #008080;">  4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.awt.Dimension;
</span><span style="color: #008080;">  5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.awt.Graphics;
</span><span style="color: #008080;">  6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.awt.event.KeyAdapter;
</span><span style="color: #008080;">  7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.awt.event.KeyEvent;
</span><span style="color: #008080;">  8</span> 
<span style="color: #008080;">  9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.swing.JPanel;
</span><span style="color: #008080;"> 10</span> 
<span style="color: #008080;"> 11</span> <span style="color: #008000;">/**</span> 
<span style="color: #008080;"> 12</span> <span style="color: #008000;"> * 游戏面板类。
</span><span style="color: #008080;"> 13</span> <span style="color: #008000;"> * 用变量存储了游戏分数，蛇的引用，食物的引用。
</span><span style="color: #008080;"> 14</span> <span style="color: #008000;"> * 还包括了游戏进行中所需要的所有方法。
</span><span style="color: #008080;"> 15</span> <span style="color: #008000;"> * 实现了Runnable接口，用以将自身作为一个线程启动。
</span><span style="color: #008080;"> 16</span> <span style="color: #008000;"> * 包含了一个内部类作为监听器，用以监听玩家的键盘输入。
</span><span style="color: #008080;"> 17</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 18</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> mlxy
</span><span style="color: #008080;"> 19</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.0
</span><span style="color: #008080;"> 20</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 21</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> GamePad <span style="color: #0000ff;">extends</span> JPanel <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Runnable {
</span><span style="color: #008080;"> 22</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">long</span> serialVersionUID = -6102074989461150615L<span style="color: #000000;">;
</span><span style="color: #008080;"> 23</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> point;
</span><span style="color: #008080;"> 24</span> <span style="color: #000000;">    Snake snake;
</span><span style="color: #008080;"> 25</span> <span style="color: #000000;">    Food food;
</span><span style="color: #008080;"> 26</span>     
<span style="color: #008080;"> 27</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 常量，游戏面板的边长。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 28</span>     <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span> SIDELEN_OF_PAD = 500<span style="color: #000000;">;
</span><span style="color: #008080;"> 29</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 常量，一个格子的边长。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 30</span>     <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span> SIDELEN_OF_GRID = 10<span style="color: #000000;">;
</span><span style="color: #008080;"> 31</span>     
<span style="color: #008080;"> 32</span> <span style="color: #000000;">    GamePad() {
</span><span style="color: #008080;"> 33</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 设置偏好大小，+1是为了能看到边界线，因为边界线宽1像素。</span>
<span style="color: #008080;"> 34</span>         <span style="color: #0000ff;">this</span>.setPreferredSize(<span style="color: #0000ff;">new</span> Dimension(SIDELEN_OF_PAD + 1, SIDELEN_OF_PAD + 1<span style="color: #000000;">));
</span><span style="color: #008080;"> 35</span>         
<span style="color: #008080;"> 36</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.setBackground(Color.WHITE);
</span><span style="color: #008080;"> 37</span>         <span style="color: #0000ff;">this</span>.addKeyListener(<span style="color: #0000ff;">new</span><span style="color: #000000;"> PlayerInputListener());
</span><span style="color: #008080;"> 38</span>         
<span style="color: #008080;"> 39</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 取得焦点，否则无法读取键盘输入。</span>
<span style="color: #008080;"> 40</span>         <span style="color: #0000ff;">this</span>.setFocusable(<span style="color: #0000ff;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 41</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.requestFocus();
</span><span style="color: #008080;"> 42</span>         
<span style="color: #008080;"> 43</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 初始化三个变量。</span>
<span style="color: #008080;"> 44</span>         point = 0<span style="color: #000000;">;
</span><span style="color: #008080;"> 45</span>         snake = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Snake();
</span><span style="color: #008080;"> 46</span>         food = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Food(snake);
</span><span style="color: #008080;"> 47</span>         
<span style="color: #008080;"> 48</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 启动线程。</span>
<span style="color: #008080;"> 49</span>         <span style="color: #0000ff;">new</span> Thread(<span style="color: #0000ff;">this</span><span style="color: #000000;">).start();
</span><span style="color: #008080;"> 50</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 51</span>     
<span style="color: #008080;"> 52</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 绘制面板内容。</span>
<span style="color: #008080;"> 53</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;"> 54</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> paintComponent(Graphics g) {
</span><span style="color: #008080;"> 55</span>         <span style="color: #0000ff;">super</span><span style="color: #000000;">.paintComponent(g);
</span><span style="color: #008080;"> 56</span> <span style="color: #000000;">        drawBorder(g);
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">        drawPoints(g);
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">        drawFood(g);
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">        drawSnake(g);
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 61</span>     
<span style="color: #008080;"> 62</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 绘制边界线。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 63</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> drawBorder(Graphics g) {
</span><span style="color: #008080;"> 64</span> <span style="color: #000000;">        g.setColor(Color.GREEN);
</span><span style="color: #008080;"> 65</span>         g.drawRect(0, 0<span style="color: #000000;">, SIDELEN_OF_PAD, SIDELEN_OF_PAD);
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">        g.setColor(Color.BLACK);
</span><span style="color: #008080;"> 67</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 68</span>     
<span style="color: #008080;"> 69</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 绘制分数字符。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 70</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> drawPoints(Graphics g) {
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">        g.setColor(Color.RED);
</span><span style="color: #008080;"> 72</span>         g.drawString("Points: " + point, 10, 20<span style="color: #000000;">);
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">        g.setColor(Color.BLACK);
</span><span style="color: #008080;"> 74</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 75</span>     
<span style="color: #008080;"> 76</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 绘制蛇身。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 77</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> drawSnake(Graphics g) {
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">        g.setColor(Color.BLUE);
</span><span style="color: #008080;"> 79</span>         
<span style="color: #008080;"> 80</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 以蛇身各节所在格子数乘以每格边长求得坐标并依次绘制。</span>
<span style="color: #008080;"> 81</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; snake.getLength(); i++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 82</span>             g.fillRect(snake.getX(i) * SIDELEN_OF_GRID, snake.getY(i) *<span style="color: #000000;"> SIDELEN_OF_GRID,
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">                    SIDELEN_OF_GRID, SIDELEN_OF_GRID);
</span><span style="color: #008080;"> 84</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 85</span> <span style="color: #000000;">        g.setColor(Color.BLACK);
</span><span style="color: #008080;"> 86</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 87</span>     
<span style="color: #008080;"> 88</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 绘制食物。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 89</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> drawFood(Graphics g) {
</span><span style="color: #008080;"> 90</span> <span style="color: #000000;">        g.setColor(Color.MAGENTA);
</span><span style="color: #008080;"> 91</span>         
<span style="color: #008080;"> 92</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 以食物所在格子数乘以每格边长求得坐标并绘制。</span>
<span style="color: #008080;"> 93</span>         g.fillOval(food.getX() * SIDELEN_OF_GRID, food.getY() *<span style="color: #000000;"> SIDELEN_OF_GRID,
</span><span style="color: #008080;"> 94</span> <span style="color: #000000;">                SIDELEN_OF_GRID, SIDELEN_OF_GRID);
</span><span style="color: #008080;"> 95</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 96</span>     
<span style="color: #008080;"> 97</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 向前方移动蛇身。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 98</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> moveSnake() {
</span><span style="color: #008080;"> 99</span>         <span style="color: #008000;">//</span><span style="color: #008000;">先根据蛇身长度将蛇身顺次移一格。</span>
<span style="color: #008080;">100</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = snake.getLength() - 1; i &gt; 0; i--<span style="color: #000000;">) {
</span><span style="color: #008080;">101</span>             snake.setX(i, snake.getX(i-1<span style="color: #000000;">));
</span><span style="color: #008080;">102</span>             snake.setY(i, snake.getY(i-1<span style="color: #000000;">));
</span><span style="color: #008080;">103</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">104</span>         
<span style="color: #008080;">105</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 根据蛇头朝向决定蛇头出现在哪个方向的格子里。</span>
<span style="color: #008080;">106</span>         <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (snake.getOrientation()) {
</span><span style="color: #008080;">107</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> UP:
</span><span style="color: #008080;">108</span>             snake.setY(0, snake.getY(0) - 1<span style="color: #000000;">);
</span><span style="color: #008080;">109</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">110</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> DOWN:
</span><span style="color: #008080;">111</span>             snake.setY(0, snake.getY(0) + 1<span style="color: #000000;">);
</span><span style="color: #008080;">112</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">113</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> LEFT:
</span><span style="color: #008080;">114</span>             snake.setX(0, snake.getX(0) - 1<span style="color: #000000;">);
</span><span style="color: #008080;">115</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">116</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> RIGHT:
</span><span style="color: #008080;">117</span>             snake.setX(0, snake.getX(0) + 1<span style="color: #000000;">);
</span><span style="color: #008080;">118</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">119</span>         <span style="color: #0000ff;">default</span><span style="color: #000000;">:
</span><span style="color: #008080;">120</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">121</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">122</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">123</span>     
<span style="color: #008080;">124</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 接收一个方向参数，改变方向。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">125</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> turn(Orientation orientation) {
</span><span style="color: #008080;">126</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 如果输入的方向是后方，则直接跳出方法，蛇不应该后退。</span>
<span style="color: #008080;">127</span>         <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (orientation) {
</span><span style="color: #008080;">128</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> UP:
</span><span style="color: #008080;">129</span>             <span style="color: #0000ff;">if</span> (snake.getOrientation() == Orientation.DOWN) {<span style="color: #0000ff;">return</span><span style="color: #000000;">;}
</span><span style="color: #008080;">130</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">131</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> DOWN:
</span><span style="color: #008080;">132</span>             <span style="color: #0000ff;">if</span> (snake.getOrientation() == Orientation.UP) {<span style="color: #0000ff;">return</span><span style="color: #000000;">;}
</span><span style="color: #008080;">133</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">134</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> LEFT:
</span><span style="color: #008080;">135</span>             <span style="color: #0000ff;">if</span> (snake.getOrientation() == Orientation.RIGHT) {<span style="color: #0000ff;">return</span><span style="color: #000000;">;}
</span><span style="color: #008080;">136</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">137</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> RIGHT:
</span><span style="color: #008080;">138</span>             <span style="color: #0000ff;">if</span> (snake.getOrientation() == Orientation.LEFT) {<span style="color: #0000ff;">return</span><span style="color: #000000;">;}
</span><span style="color: #008080;">139</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">140</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">141</span>         
<span style="color: #008080;">142</span> <span style="color: #000000;">        snake.setOrientation(orientation);
</span><span style="color: #008080;">143</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">144</span>     
<span style="color: #008080;">145</span>     
<span style="color: #008080;">146</span>     
<span style="color: #008080;">147</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 进食并改变蛇身长度，之后重新建一个食物。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">148</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> eat() {
</span><span style="color: #008080;">149</span>         snake.setLength(snake.getLength() + 1<span style="color: #000000;">);
</span><span style="color: #008080;">150</span>         point += 100<span style="color: #000000;">;
</span><span style="color: #008080;">151</span>         
<span style="color: #008080;">152</span>         food = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Food(snake);
</span><span style="color: #008080;">153</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">154</span>     
<span style="color: #008080;">155</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 运行函数。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">156</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {
</span><span style="color: #008080;">157</span>         <span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">) {
</span><span style="color: #008080;">158</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> 进行各项判断之后移动。</span>
<span style="color: #008080;">159</span>             <span style="color: #0000ff;">if</span> (isOutOfBound()) {System.exit(0<span style="color: #000000;">);}
</span><span style="color: #008080;">160</span>             <span style="color: #0000ff;">if</span> (isSelfBiting()) {System.exit(0<span style="color: #000000;">);}
</span><span style="color: #008080;">161</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (isOnFood()) {eat();}
</span><span style="color: #008080;">162</span> <span style="color: #000000;">            moveSnake();
</span><span style="color: #008080;">163</span>             
<span style="color: #008080;">164</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> 重绘面板并睡眠，睡眠时长随分数增加而缩短，最小20毫秒。</span>
<span style="color: #008080;">165</span> <span style="color: #000000;">            repaint();
</span><span style="color: #008080;">166</span>             <span style="color: #0000ff;">int</span> sleepTime = 200 - point / 10<span style="color: #000000;">;
</span><span style="color: #008080;">167</span>             <span style="color: #0000ff;">if</span> (sleepTime &lt;= 20) {sleepTime = 20<span style="color: #000000;">;}
</span><span style="color: #008080;">168</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">169</span> <span style="color: #000000;">                Thread.sleep(sleepTime);
</span><span style="color: #008080;">170</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {
</span><span style="color: #008080;">171</span> <span style="color: #000000;">                e.printStackTrace();
</span><span style="color: #008080;">172</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">173</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">174</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">175</span> 
<span style="color: #008080;">176</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 出边界检查。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">177</span>     <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isOutOfBound() {
</span><span style="color: #008080;">178</span>         <span style="color: #0000ff;">int</span> gridsOneSide = GamePad.SIDELEN_OF_PAD /<span style="color: #000000;"> GamePad.SIDELEN_OF_GRID;
</span><span style="color: #008080;">179</span>         <span style="color: #0000ff;">if</span> (snake.getX(0) &lt; 0 || snake.getX(0) &gt;=<span style="color: #000000;"> gridsOneSide) {
</span><span style="color: #008080;">180</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">181</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">182</span>         <span style="color: #0000ff;">if</span> (snake.getY(0) &lt; 0 || snake.getY(0) &gt;=<span style="color: #000000;"> gridsOneSide) {
</span><span style="color: #008080;">183</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">184</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">185</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">186</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">187</span>     
<span style="color: #008080;">188</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 自噬检查。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">189</span>     <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isSelfBiting() {
</span><span style="color: #008080;">190</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 1; i &lt; snake.getLength(); i++<span style="color: #000000;">) {
</span><span style="color: #008080;">191</span>             <span style="color: #0000ff;">if</span> (snake.getX(i) == snake.getX(0) &amp;&amp; snake.getY(i) == snake.getY(0<span style="color: #000000;">)) {
</span><span style="color: #008080;">192</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">193</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">194</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">195</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">196</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">197</span>     
<span style="color: #008080;">198</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 进食检查。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">199</span>     <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isOnFood() {
</span><span style="color: #008080;">200</span>         <span style="color: #0000ff;">if</span> (snake.getX(0) == food.getX() &amp;&amp; snake.getY(0) ==<span style="color: #000000;"> food.getY()) {
</span><span style="color: #008080;">201</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">202</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">203</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">204</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">205</span>     
<span style="color: #008080;">206</span>     <span style="color: #008000;">/**</span> 
<span style="color: #008080;">207</span> <span style="color: #008000;">     * 按键监听器。
</span><span style="color: #008080;">208</span> <span style="color: #008000;">     * 处理玩家的键盘输入。
</span><span style="color: #008080;">209</span> <span style="color: #008000;">     * 
</span><span style="color: #008080;">210</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> mlxy
</span><span style="color: #008080;">211</span> <span style="color: #008000;">     * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.0
</span><span style="color: #008080;">212</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">213</span>     <span style="color: #0000ff;">class</span> PlayerInputListener <span style="color: #0000ff;">extends</span><span style="color: #000000;"> KeyAdapter {
</span><span style="color: #008080;">214</span> <span style="color: #000000;">        @Override
</span><span style="color: #008080;">215</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> keyPressed(KeyEvent e) {
</span><span style="color: #008080;">216</span>             <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (e.getKeyCode()) {
</span><span style="color: #008080;">217</span>             <span style="color: #0000ff;">case</span><span style="color: #000000;"> KeyEvent.VK_UP:
</span><span style="color: #008080;">218</span> <span style="color: #000000;">                turn(Orientation.UP);
</span><span style="color: #008080;">219</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">220</span>             <span style="color: #0000ff;">case</span><span style="color: #000000;"> KeyEvent.VK_DOWN:
</span><span style="color: #008080;">221</span> <span style="color: #000000;">                turn(Orientation.DOWN);
</span><span style="color: #008080;">222</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">223</span>             <span style="color: #0000ff;">case</span><span style="color: #000000;"> KeyEvent.VK_LEFT:
</span><span style="color: #008080;">224</span> <span style="color: #000000;">                turn(Orientation.LEFT);
</span><span style="color: #008080;">225</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">226</span>             <span style="color: #0000ff;">case</span><span style="color: #000000;"> KeyEvent.VK_RIGHT:
</span><span style="color: #008080;">227</span> <span style="color: #000000;">                turn(Orientation.RIGHT);
</span><span style="color: #008080;">228</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">229</span>             <span style="color: #0000ff;">case</span><span style="color: #000000;"> KeyEvent.VK_ESCAPE:
</span><span style="color: #008080;">230</span>                 System.exit(0<span style="color: #000000;">);
</span><span style="color: #008080;">231</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">232</span>             <span style="color: #0000ff;">default</span><span style="color: #000000;">:
</span><span style="color: #008080;">233</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">234</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">235</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">236</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">237</span> }</pre>
</div>
<span class="cnblogs_code_collapse">GamePad.java</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('07ebb154-fd75-4c5b-8b48-582b068d25ec')"><img id="code_img_closed_07ebb154-fd75-4c5b-8b48-582b068d25ec" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_07ebb154-fd75-4c5b-8b48-582b068d25ec" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('07ebb154-fd75-4c5b-8b48-582b068d25ec',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_07ebb154-fd75-4c5b-8b48-582b068d25ec" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> snake;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #008000;">/**</span> 
<span style="color: #008080;"> 4</span> <span style="color: #008000;"> * 食物类。
</span><span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 定义了食物的坐标，内部存储了对蛇的引用以判断生成位置是否在蛇身上。
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> mlxy
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.0
</span><span style="color: #008080;"> 9</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Food {
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    Snake snake;
</span><span style="color: #008080;">12</span>     
<span style="color: #008080;">13</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 食物所在格子数，并非坐标。</span>
<span style="color: #008080;">14</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> x;
</span><span style="color: #008080;">15</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> y;
</span><span style="color: #008080;">16</span>     
<span style="color: #008080;">17</span> <span style="color: #000000;">    Food(Snake snake) {
</span><span style="color: #008080;">18</span>         <span style="color: #0000ff;">this</span>.snake =<span style="color: #000000;"> snake;
</span><span style="color: #008080;">19</span>         
<span style="color: #008080;">20</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 随机初始化食物坐标。</span>
<span style="color: #008080;">21</span>         <span style="color: #0000ff;">int</span> gridsOneSide = GamePad.SIDELEN_OF_PAD /<span style="color: #000000;"> GamePad.SIDELEN_OF_GRID;
</span><span style="color: #008080;">22</span>         
<span style="color: #008080;">23</span>         outerWhile: <span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">) {
</span><span style="color: #008080;">24</span>             x = 1 + (<span style="color: #0000ff;">int</span>) (Math.random() * (gridsOneSide - 2<span style="color: #000000;">));
</span><span style="color: #008080;">25</span>             y = 1 + (<span style="color: #0000ff;">int</span>) (Math.random() * (gridsOneSide - 2<span style="color: #000000;">));
</span><span style="color: #008080;">26</span>             
<span style="color: #008080;">27</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> 如果和蛇身重合就重新生成。</span>
<span style="color: #008080;">28</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; snake.getLength(); i++<span style="color: #000000;">) {
</span><span style="color: #008080;">29</span>                 <span style="color: #0000ff;">if</span> (snake.getX(i) == x &amp;&amp; snake.getY(i) ==<span style="color: #000000;"> y) {
</span><span style="color: #008080;">30</span>                     <span style="color: #0000ff;">continue</span><span style="color: #000000;"> outerWhile;
</span><span style="color: #008080;">31</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">32</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">33</span>             
<span style="color: #008080;">34</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> 生成完成，跳出。</span>
<span style="color: #008080;">35</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">36</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">37</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">38</span> 
<span style="color: #008080;">39</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span> getX() {<span style="color: #0000ff;">return</span><span style="color: #000000;"> x;}
</span><span style="color: #008080;">40</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span> getY() {<span style="color: #0000ff;">return</span><span style="color: #000000;"> y;}
</span><span style="color: #008080;">41</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Food.java</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('9d47445d-4246-4720-a279-b00ae03b4582')"><img id="code_img_closed_9d47445d-4246-4720-a279-b00ae03b4582" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_9d47445d-4246-4720-a279-b00ae03b4582" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('9d47445d-4246-4720-a279-b00ae03b4582',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_9d47445d-4246-4720-a279-b00ae03b4582" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> snake;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #008000;">/**</span> 
<span style="color: #008080;"> 4</span> <span style="color: #008000;"> * 蛇类。
</span><span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 定义了蛇头的朝向，蛇的长度，以及蛇身各节所在的坐标。
</span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> * 
</span><span style="color: #008080;"> 7</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> mlxy
</span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.0
</span><span style="color: #008080;"> 9</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Snake {
</span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> Orientation orientation;
</span><span style="color: #008080;">12</span>     
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> length;
</span><span style="color: #008080;">14</span>     
<span style="color: #008080;">15</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 蛇身各节所在的格子数，并非坐标。</span>
<span style="color: #008080;">16</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">[] x;
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">[] y;
</span><span style="color: #008080;">18</span>     
<span style="color: #008080;">19</span> <span style="color: #000000;">    Snake() {
</span><span style="color: #008080;">20</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 初始化朝向和长度。</span>
<span style="color: #008080;">21</span>         orientation =<span style="color: #000000;"> Orientation.RIGHT;
</span><span style="color: #008080;">22</span>         length = 2<span style="color: #000000;">;
</span><span style="color: #008080;">23</span>         
<span style="color: #008080;">24</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 用游戏面板总格子数初始化数组大小。</span>
<span style="color: #008080;">25</span>         <span style="color: #0000ff;">int</span> numberOfGrid = (<span style="color: #0000ff;">int</span>) Math.pow(GamePad.SIDELEN_OF_PAD / GamePad.SIDELEN_OF_GRID, 2<span style="color: #000000;">);
</span><span style="color: #008080;">26</span>         x = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">[numberOfGrid];
</span><span style="color: #008080;">27</span>         y = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">[numberOfGrid];
</span><span style="color: #008080;">28</span>         
<span style="color: #008080;">29</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 初始化最初的蛇身位置。</span>
<span style="color: #008080;">30</span>         <span style="color: #0000ff;">int</span> gridsOneSide = GamePad.SIDELEN_OF_PAD /<span style="color: #000000;"> GamePad.SIDELEN_OF_GRID;
</span><span style="color: #008080;">31</span>         x[1] = gridsOneSide / 2 + 1<span style="color: #000000;">;
</span><span style="color: #008080;">32</span>         y[1] = gridsOneSide / 2<span style="color: #000000;">;
</span><span style="color: #008080;">33</span>         x[0] = gridsOneSide / 2<span style="color: #000000;">;
</span><span style="color: #008080;">34</span>         y[0] = gridsOneSide / 2<span style="color: #000000;">;
</span><span style="color: #008080;">35</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">36</span>     
<span style="color: #008080;">37</span>     <span style="color: #0000ff;">int</span> getLength() {<span style="color: #0000ff;">return</span><span style="color: #000000;"> length;}
</span><span style="color: #008080;">38</span>     <span style="color: #0000ff;">void</span> setLength(<span style="color: #0000ff;">int</span> newLength) {<span style="color: #0000ff;">this</span>.length =<span style="color: #000000;"> newLength;}
</span><span style="color: #008080;">39</span>     
<span style="color: #008080;">40</span>     <span style="color: #0000ff;">int</span> getX(<span style="color: #0000ff;">int</span> index) {<span style="color: #0000ff;">return</span><span style="color: #000000;"> x[index];}
</span><span style="color: #008080;">41</span>     <span style="color: #0000ff;">int</span> getY(<span style="color: #0000ff;">int</span> index) {<span style="color: #0000ff;">return</span><span style="color: #000000;"> y[index];}
</span><span style="color: #008080;">42</span>     
<span style="color: #008080;">43</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setX(<span style="color: #0000ff;">int</span> index, <span style="color: #0000ff;">int</span> x) {<span style="color: #0000ff;">this</span>.x[index] =<span style="color: #000000;"> x;}
</span><span style="color: #008080;">44</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setY(<span style="color: #0000ff;">int</span> index, <span style="color: #0000ff;">int</span> y) {<span style="color: #0000ff;">this</span>.y[index] =<span style="color: #000000;"> y;}
</span><span style="color: #008080;">45</span>     
<span style="color: #008080;">46</span>     <span style="color: #0000ff;">public</span> Orientation getOrientation() {<span style="color: #0000ff;">return</span><span style="color: #000000;"> orientation;}
</span><span style="color: #008080;">47</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setOrientation(Orientation orientation) {<span style="color: #0000ff;">this</span>.orientation =<span style="color: #000000;"> orientation;}
</span><span style="color: #008080;">48</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Snake.java </span></div>

<div align=right><a href="https://github.com/mlxy"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>