---
layout: post
title: 既然你已经不爱我了，那我们还是不要联系了
date: 2015-10-14 10:36:00
categories: cnblogs
---

<p>MotionEvent.ACTION_UP 可以当做点击事件的触发条件吗？</p>
<p>&nbsp;</p>
<p>答案是不行。</p>
<p>&nbsp;</p>
<p><span style="text-decoration: line-through;">我</span>许多人为了给自定义View添加点击事件也是想破了脑袋。</p>
<p>如何让自定义View既允许外部设置OnClickListener，又能保证在自定义View被点击时也执行一些其他的代码呢？</p>
<p>首先View里根本没有onClick之类的方法可以方便地重写，于是<span style="text-decoration: line-through;">我</span>很多人就很自然地把视线转移到了onTouchEvent上来：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">@Override
</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> onTouchEvent(MotionEvent event) {
    </span><span style="color: #0000ff;">if</span> (event.getAction() ==<span style="color: #000000;"> MotionEvent.ACTION_UP) {
        clicked();
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">super</span><span style="color: #000000;">.onTouchEvent(event);
}</span></pre>
</div>
<p>把手拿起来的时候就是点击结束的时候嘛，我真是太机智了。</p>
<p>这段代码看起来一点问题都没有对不对？</p>
<p>&nbsp;</p>
<p>对个大头鬼。</p>
<p>&nbsp;</p>
<p>按下按钮之后你突然发现不能反悔了。就算把手指从按钮上移开，代码还是会跑到 ACTION_UP 下面去。</p>
<p>怎么回事，这跟说好的不一样啊？不是按下去之后移走就取消操作的么？我写了两个小时文档点叉之后不小心点到不保存的时候就是这招救了我的命的啊？</p>
<p>&nbsp;</p>
<p>不说别的，如果点击事件真这么容易处理，Google程序员把</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e1bac676-a8bc-406b-8c3c-30266493d0f2')"><img id="code_img_closed_e1bac676-a8bc-406b-8c3c-30266493d0f2" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_e1bac676-a8bc-406b-8c3c-30266493d0f2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e1bac676-a8bc-406b-8c3c-30266493d0f2',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_e1bac676-a8bc-406b-8c3c-30266493d0f2" class="cnblogs_code_hide">
<pre><span style="color: #008080;">  1</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> onTouchEvent(MotionEvent event) {
</span><span style="color: #008080;">  2</span>         <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">float</span> x =<span style="color: #000000;"> event.getX();
</span><span style="color: #008080;">  3</span>         <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">float</span> y =<span style="color: #000000;"> event.getY();
</span><span style="color: #008080;">  4</span>         <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">int</span> viewFlags =<span style="color: #000000;"> mViewFlags;
</span><span style="color: #008080;">  5</span>         <span style="color: #0000ff;">final</span> <span style="color: #0000ff;">int</span> action =<span style="color: #000000;"> event.getAction();
</span><span style="color: #008080;">  6</span> 
<span style="color: #008080;">  7</span>         <span style="color: #0000ff;">if</span> ((viewFlags &amp; ENABLED_MASK) ==<span style="color: #000000;"> DISABLED) {
</span><span style="color: #008080;">  8</span>             <span style="color: #0000ff;">if</span> (action == MotionEvent.ACTION_UP &amp;&amp; (mPrivateFlags &amp; PFLAG_PRESSED) != 0<span style="color: #000000;">) {
</span><span style="color: #008080;">  9</span>                 setPressed(<span style="color: #0000ff;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 10</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 11</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> A disabled view that is clickable still consumes the touch
</span><span style="color: #008080;"> 12</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> events, it just doesn't respond to them.</span>
<span style="color: #008080;"> 13</span>             <span style="color: #0000ff;">return</span> (((viewFlags &amp; CLICKABLE) ==<span style="color: #000000;"> CLICKABLE
</span><span style="color: #008080;"> 14</span>                     || (viewFlags &amp; LONG_CLICKABLE) ==<span style="color: #000000;"> LONG_CLICKABLE)
</span><span style="color: #008080;"> 15</span>                     || (viewFlags &amp; CONTEXT_CLICKABLE) ==<span style="color: #000000;"> CONTEXT_CLICKABLE);
</span><span style="color: #008080;"> 16</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 17</span> 
<span style="color: #008080;"> 18</span>         <span style="color: #0000ff;">if</span> (mTouchDelegate != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 19</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (mTouchDelegate.onTouchEvent(event)) {
</span><span style="color: #008080;"> 20</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 21</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 22</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 23</span> 
<span style="color: #008080;"> 24</span>         <span style="color: #0000ff;">if</span> (((viewFlags &amp; CLICKABLE) == CLICKABLE ||
<span style="color: #008080;"> 25</span>                 (viewFlags &amp; LONG_CLICKABLE) == LONG_CLICKABLE) ||
<span style="color: #008080;"> 26</span>                 (viewFlags &amp; CONTEXT_CLICKABLE) ==<span style="color: #000000;"> CONTEXT_CLICKABLE) {
</span><span style="color: #008080;"> 27</span>             <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (action) {
</span><span style="color: #008080;"> 28</span>                 <span style="color: #0000ff;">case</span><span style="color: #000000;"> MotionEvent.ACTION_UP:
</span><span style="color: #008080;"> 29</span>                     <span style="color: #0000ff;">boolean</span> prepressed = (mPrivateFlags &amp; PFLAG_PREPRESSED) != 0<span style="color: #000000;">;
</span><span style="color: #008080;"> 30</span>                     <span style="color: #0000ff;">if</span> ((mPrivateFlags &amp; PFLAG_PRESSED) != 0 ||<span style="color: #000000;"> prepressed) {
</span><span style="color: #008080;"> 31</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> take focus if we don't have it already and we should in
</span><span style="color: #008080;"> 32</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> touch mode.</span>
<span style="color: #008080;"> 33</span>                         <span style="color: #0000ff;">boolean</span> focusTaken = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 34</span>                         <span style="color: #0000ff;">if</span> (isFocusable() &amp;&amp; isFocusableInTouchMode() &amp;&amp; !<span style="color: #000000;">isFocused()) {
</span><span style="color: #008080;"> 35</span>                             focusTaken =<span style="color: #000000;"> requestFocus();
</span><span style="color: #008080;"> 36</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;"> 37</span> 
<span style="color: #008080;"> 38</span>                         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (prepressed) {
</span><span style="color: #008080;"> 39</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> The button is being released before we actually
</span><span style="color: #008080;"> 40</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> showed it as pressed.  Make it show the pressed
</span><span style="color: #008080;"> 41</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> state now (before scheduling the click) to ensure
</span><span style="color: #008080;"> 42</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> the user sees it.</span>
<span style="color: #008080;"> 43</span>                             setPressed(<span style="color: #0000ff;">true</span><span style="color: #000000;">, x, y);
</span><span style="color: #008080;"> 44</span> <span style="color: #000000;">                       }
</span><span style="color: #008080;"> 45</span> 
<span style="color: #008080;"> 46</span>                         <span style="color: #0000ff;">if</span> (!mHasPerformedLongPress &amp;&amp; !<span style="color: #000000;">mIgnoreNextUpEvent) {
</span><span style="color: #008080;"> 47</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> This is a tap, so remove the longpress check</span>
<span style="color: #008080;"> 48</span> <span style="color: #000000;">                            removeLongPressCallback();
</span><span style="color: #008080;"> 49</span> 
<span style="color: #008080;"> 50</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> Only perform take click actions if we were in the pressed state</span>
<span style="color: #008080;"> 51</span>                             <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">focusTaken) {
</span><span style="color: #008080;"> 52</span>                                 <span style="color: #008000;">//</span><span style="color: #008000;"> Use a Runnable and post this rather than calling
</span><span style="color: #008080;"> 53</span>                                 <span style="color: #008000;">//</span><span style="color: #008000;"> performClick directly. This lets other visual state
</span><span style="color: #008080;"> 54</span>                                 <span style="color: #008000;">//</span><span style="color: #008000;"> of the view update before click actions start.</span>
<span style="color: #008080;"> 55</span>                                 <span style="color: #0000ff;">if</span> (mPerformClick == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 56</span>                                     mPerformClick = <span style="color: #0000ff;">new</span><span style="color: #000000;"> PerformClick();
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">                                }
</span><span style="color: #008080;"> 58</span>                                 <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">post(mPerformClick)) {
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">                                    performClick();
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">                                }
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;"> 62</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;"> 63</span> 
<span style="color: #008080;"> 64</span>                         <span style="color: #0000ff;">if</span> (mUnsetPressedState == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 65</span>                             mUnsetPressedState = <span style="color: #0000ff;">new</span><span style="color: #000000;"> UnsetPressedState();
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;"> 67</span> 
<span style="color: #008080;"> 68</span>                         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (prepressed) {
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">                            postDelayed(mUnsetPressedState,
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">                                    ViewConfiguration.getPressedStateDuration());
</span><span style="color: #008080;"> 71</span>                         } <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">post(mUnsetPressedState)) {
</span><span style="color: #008080;"> 72</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> If the post failed, unpress right now</span>
<span style="color: #008080;"> 73</span> <span style="color: #000000;">                            mUnsetPressedState.run();
</span><span style="color: #008080;"> 74</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;"> 75</span> 
<span style="color: #008080;"> 76</span> <span style="color: #000000;">                        removeTapCallback();
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;"> 78</span>                     mIgnoreNextUpEvent = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 79</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 80</span> 
<span style="color: #008080;"> 81</span>                 <span style="color: #0000ff;">case</span><span style="color: #000000;"> MotionEvent.ACTION_DOWN:
</span><span style="color: #008080;"> 82</span>                     mHasPerformedLongPress = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 83</span> 
<span style="color: #008080;"> 84</span>                     <span style="color: #0000ff;">if</span><span style="color: #000000;"> (performButtonActionOnTouchDown(event)) {
</span><span style="color: #008080;"> 85</span>                         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 86</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;"> 87</span> 
<span style="color: #008080;"> 88</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> Walk up the hierarchy to determine if we're inside a scrolling container.</span>
<span style="color: #008080;"> 89</span>                     <span style="color: #0000ff;">boolean</span> isInScrollingContainer =<span style="color: #000000;"> isInScrollingContainer();
</span><span style="color: #008080;"> 90</span> 
<span style="color: #008080;"> 91</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> For views inside a scrolling container, delay the pressed feedback for
</span><span style="color: #008080;"> 92</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> a short period in case this is a scroll.</span>
<span style="color: #008080;"> 93</span>                     <span style="color: #0000ff;">if</span><span style="color: #000000;"> (isInScrollingContainer) {
</span><span style="color: #008080;"> 94</span>                         mPrivateFlags |=<span style="color: #000000;"> PFLAG_PREPRESSED;
</span><span style="color: #008080;"> 95</span>                         <span style="color: #0000ff;">if</span> (mPendingCheckForTap == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 96</span>                             mPendingCheckForTap = <span style="color: #0000ff;">new</span><span style="color: #000000;"> CheckForTap();
</span><span style="color: #008080;"> 97</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;"> 98</span>                         mPendingCheckForTap.x =<span style="color: #000000;"> event.getX();
</span><span style="color: #008080;"> 99</span>                         mPendingCheckForTap.y =<span style="color: #000000;"> event.getY();
</span><span style="color: #008080;">100</span> <span style="color: #000000;">                        postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout());
</span><span style="color: #008080;">101</span>                     } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;">102</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> Not inside a scrolling container, so show the feedback right away</span>
<span style="color: #008080;">103</span>                         setPressed(<span style="color: #0000ff;">true</span><span style="color: #000000;">, x, y);
</span><span style="color: #008080;">104</span>                         checkForLongClick(0<span style="color: #000000;">);
</span><span style="color: #008080;">105</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">106</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">107</span> 
<span style="color: #008080;">108</span>                 <span style="color: #0000ff;">case</span><span style="color: #000000;"> MotionEvent.ACTION_CANCEL:
</span><span style="color: #008080;">109</span>                     setPressed(<span style="color: #0000ff;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">110</span> <span style="color: #000000;">                    removeTapCallback();
</span><span style="color: #008080;">111</span> <span style="color: #000000;">                    removeLongPressCallback();
</span><span style="color: #008080;">112</span>                     mInContextButtonPress = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">113</span>                     mHasPerformedLongPress = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">114</span>                     mIgnoreNextUpEvent = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">115</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">116</span> 
<span style="color: #008080;">117</span>                 <span style="color: #0000ff;">case</span><span style="color: #000000;"> MotionEvent.ACTION_MOVE:
</span><span style="color: #008080;">118</span> <span style="color: #000000;">                    drawableHotspotChanged(x, y);
</span><span style="color: #008080;">119</span> 
<span style="color: #008080;">120</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> Be lenient about moving outside of buttons</span>
<span style="color: #008080;">121</span>                     <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">pointInView(x, y, mTouchSlop)) {
</span><span style="color: #008080;">122</span>                         <span style="color: #008000;">//</span><span style="color: #008000;"> Outside button</span>
<span style="color: #008080;">123</span> <span style="color: #000000;">                        removeTapCallback();
</span><span style="color: #008080;">124</span>                         <span style="color: #0000ff;">if</span> ((mPrivateFlags &amp; PFLAG_PRESSED) != 0<span style="color: #000000;">) {
</span><span style="color: #008080;">125</span>                             <span style="color: #008000;">//</span><span style="color: #008000;"> Remove any future long press/tap checks</span>
<span style="color: #008080;">126</span> <span style="color: #000000;">                            removeLongPressCallback();
</span><span style="color: #008080;">127</span> 
<span style="color: #008080;">128</span>                             setPressed(<span style="color: #0000ff;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">129</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">130</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">131</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">132</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">133</span> 
<span style="color: #008080;">134</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">135</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">136</span> 
<span style="color: #008080;">137</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">138</span>     }</pre>
</div>
<span class="cnblogs_code_collapse">View.onTouchEvent()</span></div>
<p>写这么长是为了好玩吗。</p>
<p>悟空，回想一下SeekBar死前三天的样子吧。</p>
<p>拖动SeekBar的滑块时手指如果离开了SeekBar的范围会怎么样？</p>
<p>滑块还是会左右动的。</p>
<p>&nbsp;</p>
<p>所以单纯把离开范围的所有事件直接扔掉显然是不可以的。</p>
<p>那么这个问题怎么处理呢？</p>
<p>&nbsp;</p>
<p>聪(s&agrave;ng)明(xīn)伶(b&igrave;ng)俐(ku&aacute;ng)的爆栈网网友想出了许多波谲云诡的技巧，比如：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span>         <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (event.getAction()) {
</span><span style="color: #008080;"> 2</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> MotionEvent.ACTION_DOWN:
</span><span style="color: #008080;"> 3</span>             rect = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Rect(v.getLeft(), v.getTop(), v.getRight(), v.getBottom());
</span><span style="color: #008080;"> 4</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">case</span><span style="color: #000000;"> MotionEvent.ACTION_UP:
</span><span style="color: #008080;"> 6</span>             <span style="color: #0000ff;">if</span> (rect != <span style="color: #0000ff;">null</span>
<span style="color: #008080;"> 7</span>                     &amp;&amp; !rect.contains(v.getLeft() + (<span style="color: #0000ff;">int</span><span style="color: #000000;">) event.getX(),
</span><span style="color: #008080;"> 8</span>                         v.getTop() + (<span style="color: #0000ff;">int</span><span style="color: #000000;">) event.getY())) {
</span><span style="color: #008080;"> 9</span>                 <span style="color: #008000;">//</span><span style="color: #008000;"> The motion event was outside of the view, handle this as a non-click event</span>
<span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">13</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> The view was clicked.
</span><span style="color: #008080;">14</span>             <span style="color: #008000;">//</span><span style="color: #008000;"> TODO: do stuff</span>
<span style="color: #008080;">15</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">16</span>         <span style="color: #0000ff;">default</span><span style="color: #000000;">:
</span><span style="color: #008080;">17</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span>;</pre>
</div>
<p>&nbsp;</p>
<p>实在是太有想法了，让人想上金正恩拍手图。</p>
<p>但是这个方法太不优雅了，高贵如我怎能用这种庶民级的work-around。</p>
<p>于是我花了一下午时间思考，终于得出了答案。</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">public</span> CustomView(Context context, AttributeSet attrs, <span style="color: #0000ff;">int</span><span style="color: #000000;"> defStyleAttr) {
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">    ......
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">super</span>.setOnClickListener(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> <span style="color: #000000;">@Override
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setOnClickListener(<span style="color: #0000ff;">final</span><span style="color: #000000;"> OnClickListener l) {
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">super</span>.setOnClickListener(<span style="color: #0000ff;">new</span><span style="color: #000000;"> OnClickListener() {
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">        @Override
</span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> onClick(View v) {
</span><span style="color: #008080;">11</span>             CustomView.<span style="color: #0000ff;">this</span><span style="color: #000000;">.onClick(v);
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span>             <span style="color: #0000ff;">if</span> (l != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;">14</span> <span style="color: #000000;">                l.onClick(v);
</span><span style="color: #008080;">15</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">16</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">17</span> <span style="color: #000000;">    });
</span><span style="color: #008080;">18</span> <span style="color: #000000;">}
</span><span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span> <span style="color: #000000;">@Override
</span><span style="color: #008080;">21</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> onClick(View v) {
</span><span style="color: #008080;">22</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> Do something</span>
<span style="color: #008080;">23</span> }</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;真TM想扇自己两巴掌&hellip;&hellip;</p>

<div align=right><a href="https://github.com/mlxy"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>