---
layout: post
title: 新写了XmlFile类
date: 2014-03-28 14:11:00
categories: cnblogs
---

<p>用了单例模式。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('dc4d0758-1ff3-4ee3-8462-230ab16cbe43')"><img id="code_img_closed_dc4d0758-1ff3-4ee3-8462-230ab16cbe43" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_dc4d0758-1ff3-4ee3-8462-230ab16cbe43" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('dc4d0758-1ff3-4ee3-8462-230ab16cbe43',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_dc4d0758-1ff3-4ee3-8462-230ab16cbe43" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> XmlFile {
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> File xmlFile;
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> String fileName = "xml_resource.xml"<span style="color: #000000;">;
</span><span style="color: #008080;"> 4</span>     
<span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> XmlFile() {}
</span><span style="color: #008080;"> 6</span>     
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">synchronized</span><span style="color: #000000;"> File getFile() {
</span><span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 获取外部存储路径并取得文件对象。</span>
<span style="color: #008080;"> 9</span>         File externalDirectory =<span style="color: #000000;"> Environment.getExternalStorageDirectory();
</span><span style="color: #008080;">10</span>         xmlFile = <span style="color: #0000ff;">new</span><span style="color: #000000;"> File(externalDirectory, fileName);
</span><span style="color: #008080;">11</span>         
<span style="color: #008080;">12</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> xmlFile;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">14</span> }</pre>
</div>
<span class="cnblogs_code_collapse">整合了一下而已</span></div>
<p>和前一篇博客说的一样，私有构造函数避免外部实例化。</p>
<p>内部存放一个对象，给一个获取实例的方法，为了执行效率，获取的时候再实例化。</p>
<p>获取方法加上synchronized关键字，为了避免在出现线程同步问题的时候同时出现两个XmlFile的实例。</p>
<p>同时改了下场景类，这个就不用说了吧。</p>
<p>改一下获取文件的方法而已。</p>

<div align=right><a href="https://github.com/mlxy/SRBCnblogs"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>