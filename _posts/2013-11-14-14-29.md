---
layout: post
title: 我问你，一个程序发三遍是什么毛病
date: 2013-11-14 14:29:00
categories: cnblogs
---

<p>　　是弱逼综合症。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('f94b3fc0-0383-4bc8-b618-27363c12c15b')"><img id="code_img_closed_f94b3fc0-0383-4bc8-b618-27363c12c15b" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" width="11" height="16" /><img id="code_img_opened_f94b3fc0-0383-4bc8-b618-27363c12c15b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f94b3fc0-0383-4bc8-b618-27363c12c15b',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_f94b3fc0-0383-4bc8-b618-27363c12c15b" class="cnblogs_code_hide">
<pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> TicTacToe;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> <span style="color: #008000;">/**</span><span style="color: #008000;">Name:    TicTacToe
</span><span style="color: #008080;">  4</span> <span style="color: #008000;"> * Author:    mlxy
</span><span style="color: #008080;">  5</span> <span style="color: #008000;"> * Date:    2013-11-14
</span><span style="color: #008080;">  6</span> <span style="color: #008000;"> * Version:    0.9
</span><span style="color: #008080;">  7</span> <span style="color: #008000;"> * Memo:    异常检查没做，落子的时候超范围就报错。
</span><span style="color: #008080;">  8</span> <span style="color: #008000;"> *             电脑的AI没做，基本上三个子就能赢。
</span><span style="color: #008080;">  9</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 10</span> 
<span style="color: #008080;"> 11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Scanner;
</span><span style="color: #008080;"> 12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Random;
</span><span style="color: #008080;"> 13</span> 
<span style="color: #008080;"> 14</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Run {
</span><span style="color: #008080;"> 15</span>     
<span style="color: #008080;"> 16</span>     <span style="color: #008000;">//</span><span style="color: #008000;"> 数组输入和随机三个必需对象。</span>
<span style="color: #008080;"> 17</span>     <span style="color: #0000ff;">static</span> Scanner input = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Scanner(System.in);
</span><span style="color: #008080;"> 18</span>     String[] panel = <span style="color: #0000ff;">new</span> String[9<span style="color: #000000;">];
</span><span style="color: #008080;"> 19</span>     Random generator = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Random();
</span><span style="color: #008080;"> 20</span>     
<span style="color: #008080;"> 21</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> drawPanel() {
</span><span style="color: #008080;"> 22</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 读取成员变量panel来绘制棋盘。</span>
<span style="color: #008080;"> 23</span>         
<span style="color: #008080;"> 24</span>         System.out.println(panel[0] + " " + panel[1] + " " + panel[2<span style="color: #000000;">]);
</span><span style="color: #008080;"> 25</span>         System.out.println(panel[3] + " " + panel[4] + " " + panel[5<span style="color: #000000;">]);
</span><span style="color: #008080;"> 26</span>         System.out.println(panel[6] + " " + panel[7] + " " + panel[8<span style="color: #000000;">]);
</span><span style="color: #008080;"> 27</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 28</span>     
<span style="color: #008080;"> 29</span>     <span style="color: #0000ff;">int</span> playerMove(<span style="color: #0000ff;">int</span><span style="color: #000000;"> i) {
</span><span style="color: #008080;"> 30</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 玩家落子。简单检查格子是否已经被占用。</span>
<span style="color: #008080;"> 31</span>         
<span style="color: #008080;"> 32</span>         <span style="color: #0000ff;">if</span> (panel[i-1] == "○" || panel[i-1] == "&times;"<span style="color: #000000;">) {
</span><span style="color: #008080;"> 33</span>             System.out.println("有子。"<span style="color: #000000;">);
</span><span style="color: #008080;"> 34</span>             <span style="color: #0000ff;">return</span> 0<span style="color: #000000;">;
</span><span style="color: #008080;"> 35</span>         } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 36</span>             panel[i-1] = "○"<span style="color: #000000;">;
</span><span style="color: #008080;"> 37</span>             <span style="color: #0000ff;">return</span> 1<span style="color: #000000;">;
</span><span style="color: #008080;"> 38</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 39</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 40</span>     
<span style="color: #008080;"> 41</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> comMove() {
</span><span style="color: #008080;"> 42</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 电脑落子。随机生成0-8的整数来落子，如果已经有子就continue掉重新生成。</span>
<span style="color: #008080;"> 43</span>         
<span style="color: #008080;"> 44</span>         <span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 45</span>             <span style="color: #0000ff;">int</span> location = generator.nextInt(9<span style="color: #000000;">);
</span><span style="color: #008080;"> 46</span>             <span style="color: #0000ff;">if</span> (panel[location] == "○" || panel[location] == "&times;"<span style="color: #000000;">) {
</span><span style="color: #008080;"> 47</span>                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 48</span>             } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 49</span>                 panel[location] = "&times;"<span style="color: #000000;">;
</span><span style="color: #008080;"> 50</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 51</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 52</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 54</span>     
<span style="color: #008080;"> 55</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> checkWin() {
</span><span style="color: #008080;"> 56</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 虽然判断还是这么逗比，但是比之前好看多啦。</span>
<span style="color: #008080;"> 57</span>         
<span style="color: #008080;"> 58</span>         <span style="color: #0000ff;">if</span> ((panel[0] == panel[1] &amp; panel[1]== panel[2] &amp; panel[0] != "□") || 
<span style="color: #008080;"> 59</span>             (panel[3] == panel[4] &amp; panel[4]== panel[5] &amp; panel[3] != "□") ||
<span style="color: #008080;"> 60</span>             (panel[6] == panel[7] &amp; panel[7]== panel[8] &amp; panel[6] != "□") ||
<span style="color: #008080;"> 61</span>             (panel[0] == panel[3] &amp; panel[3]== panel[6] &amp; panel[0] != "□") ||
<span style="color: #008080;"> 62</span>             (panel[1] == panel[4] &amp; panel[4]== panel[7] &amp; panel[1] != "□") ||
<span style="color: #008080;"> 63</span>             (panel[2] == panel[5] &amp; panel[5]== panel[8] &amp; panel[2] != "□") ||
<span style="color: #008080;"> 64</span>             (panel[0] == panel[4] &amp; panel[4]== panel[8] &amp; panel[0] != "□") ||
<span style="color: #008080;"> 65</span>             (panel[2] == panel[4] &amp; panel[4]== panel[6] &amp; panel[2] != "□"<span style="color: #000000;">)) {
</span><span style="color: #008080;"> 66</span>             <span style="color: #0000ff;">return</span> 1<span style="color: #000000;">;
</span><span style="color: #008080;"> 67</span>         } <span style="color: #0000ff;">else</span><span style="color: #000000;"> {
</span><span style="color: #008080;"> 68</span>             <span style="color: #0000ff;">return</span> 0<span style="color: #000000;">;
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 71</span>     
<span style="color: #008080;"> 72</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> checkFull() {
</span><span style="color: #008080;"> 73</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 检查棋盘是否已经被占满。
</span><span style="color: #008080;"> 74</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 迭代棋盘内容，如果有空格子就立刻返回0。</span>
<span style="color: #008080;"> 75</span>         
<span style="color: #008080;"> 76</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=0; i&lt;9; i++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 77</span>             <span style="color: #0000ff;">if</span> (panel[i] == "□"<span style="color: #000000;">) {
</span><span style="color: #008080;"> 78</span>                 <span style="color: #0000ff;">return</span> 0<span style="color: #000000;">;
</span><span style="color: #008080;"> 79</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 80</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 81</span>         <span style="color: #0000ff;">return</span> 1<span style="color: #000000;">;
</span><span style="color: #008080;"> 82</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 83</span>     
<span style="color: #008080;"> 84</span>     
<span style="color: #008080;"> 85</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
</span><span style="color: #008080;"> 86</span>         
<span style="color: #008080;"> 87</span>         Run game = <span style="color: #0000ff;">new</span> Run();                         <span style="color: #008000;">//</span> 
<span style="color: #008080;"> 88</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=0; i&lt;9; i++) {                     <span style="color: #008000;">//</span><span style="color: #008000;"> 创建新对象并初始化棋盘内容。</span>
<span style="color: #008080;"> 89</span>             game.panel[i] = "□";                    <span style="color: #008000;">//
</span><span style="color: #008080;"> 90</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 91</span>         game.drawPanel(); <span style="color: #008000;">//</span><span style="color: #008000;"> 绘制棋盘。</span>
<span style="color: #008080;"> 92</span>         
<span style="color: #008080;"> 93</span>         <span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 94</span>             System.out.print("\n落子(1-9)：");        <span style="color: #008000;">//
</span><span style="color: #008080;"> 95</span>             <span style="color: #0000ff;">int</span> playermove = input.nextInt();        <span style="color: #008000;">//
</span><span style="color: #008080;"> 96</span>             <span style="color: #0000ff;">if</span> (game.playerMove(playermove) == 0) {    <span style="color: #008000;">//</span><span style="color: #008000;"> 获取玩家输入并检查是否已落子后重绘棋盘。</span>
<span style="color: #008080;"> 97</span>                 <span style="color: #0000ff;">continue</span>;                            <span style="color: #008000;">//
</span><span style="color: #008080;"> 98</span>             }                                        <span style="color: #008000;">//
</span><span style="color: #008080;"> 99</span>             game.drawPanel();                        <span style="color: #008000;">//
</span><span style="color: #008080;">100</span>             
<span style="color: #008080;">101</span>             <span style="color: #0000ff;">if</span> (game.checkWin() == 1) {                <span style="color: #008000;">//
</span><span style="color: #008080;">102</span>                 System.out.println("你赢。");        <span style="color: #008000;">//
</span><span style="color: #008080;">103</span>                 <span style="color: #0000ff;">break</span>;                                <span style="color: #008000;">//</span><span style="color: #008000;"> 进行玩家胜负判断。</span>
<span style="color: #008080;">104</span>             } <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (game.checkFull() == 1) {        <span style="color: #008000;">//
</span><span style="color: #008080;">105</span>                 System.out.println("平局。");        <span style="color: #008000;">//
</span><span style="color: #008080;">106</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">107</span>             
<span style="color: #008080;">108</span>             System.out.println("\n电脑：");            <span style="color: #008000;">//
</span><span style="color: #008080;">109</span>             game.comMove();                            <span style="color: #008000;">//</span><span style="color: #008000;"> 电脑落子并重绘棋盘。</span>
<span style="color: #008080;">110</span>             game.drawPanel();                        <span style="color: #008000;">//
</span><span style="color: #008080;">111</span>             
<span style="color: #008080;">112</span>             <span style="color: #0000ff;">if</span> (game.checkWin() == 1) {                <span style="color: #008000;">//
</span><span style="color: #008080;">113</span>                 System.out.println("你输。");        <span style="color: #008000;">//
</span><span style="color: #008080;">114</span>                 <span style="color: #0000ff;">break</span>;                                <span style="color: #008000;">//</span><span style="color: #008000;"> 进行电脑胜负判断。</span>
<span style="color: #008080;">115</span>             } <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (game.checkFull() == 1) {        <span style="color: #008000;">//
</span><span style="color: #008080;">116</span>                 System.out.println("平局。");        <span style="color: #008000;">//
</span><span style="color: #008080;">117</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">118</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">119</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">120</span> }</pre>
</div>
<span class="cnblogs_code_collapse">折叠代码</span></div>
<p>　　目前最规范的一个程序。</p>
<p>　　反正能看了，来生想想怎么做AI。</p>
<p>　　用判断也可以搞定，改一改comMove方法，如果一条线上有两个玩家落的子就下到那去，不然就随机下。</p>
<p>　　但是考虑到checkWin的那个样子&hellip;&hellip;</p>
<p>　　还是等找到新技术了再来改吧&hellip;&hellip;</p>

<div align=right><a href="https://github.com/mlxy/SRBCnblogs"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>