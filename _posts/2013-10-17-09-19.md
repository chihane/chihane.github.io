---
layout: post
title: 我就写个字典居然卡了两天重申一遍文字编码日你大爷
date: 2013-10-17 09:19:00
categories: cnblogs
---

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;来看这个：&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'扣的扣的扣你母亲'.decode('utf-8').encode('gbk')</p>
<p><span style="text-decoration: underline;">(1)str.decode():</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用来把前边的字符串解码成unicode，因为Python内部用的是unicode。括号里需要的是字符串的编码&mdash;&mdash;不是你想要的码，更不能不给参数&mdash;&mdash;一般指默认编码，和文件默认编码一致，在代码开头用&nbsp;#coding:编码&nbsp;显式指明，或者用 u'字符串'&nbsp;的形式直接转成unicode格式，直接省略decode这一步。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不过问题是，在UliPad里只要不显式指明编码，不管怎么decode encode 加u&nbsp;用unicode()&nbsp;都会报错：</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SyntaxError: Non-ASCII character '\xe4' in file D:\Software Toka\Python 2.7.5\Untitled 1.py on line 1, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;看样子是只要非ASCII的字符都不能用，具体原因不明。</p>
<p><span style="text-decoration: underline;">(2)str.encode():</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用于将Unicode字符编码成你想要的格式。相当于先用decode拆成unicode，再用encode组合起来。至于为什么用unicode中继前边已经说了，因为Python内部用的是unicode。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;例子里的第一步已经把字符串拆成了unicode，之后我需要的是GBK编码，因为我想显示的就是中文，所以在decode的基础上再encode('gbk')，就得到了GBK编码的文字，可以正常在命令行里显示。</p>
<p><span style="text-decoration: underline;">(3)一些方法：</span></p>
<p>&nbsp;&nbsp;&nbsp; sys.getdefaultencoding(&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;当然要先导入sys模块。</p>
<p>&nbsp;&nbsp;&nbsp; isinstance(string, unicode)&nbsp;&nbsp;&nbsp;用来查看字符串是不是unicode编码。</p>
<p>&nbsp;</p>
<p>关门放代码：</p>
<p><img src="http://images.cnitblog.com/blog/580469/201311/08234901-fb9a17a007f5469ba4458a94f1c60ee7.png" alt="" /><br /><br /></p>

<div align=right><a href="https://github.com/mlxy/SRBCnblogs"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>