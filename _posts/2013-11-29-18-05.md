---
layout: post
title: OK
date: 2013-11-29 18:05:00
categories: cnblogs
---

<p>　　加上了AI，总算是可以玩了。不过目前的AI只会消极防守，玩家和电脑都不能赢的时候AI只会随机下，好在棋盘小，所以这个问题不算太大。</p>
<p>　　大概也不会继续完善了吧&hellip;&hellip;都是重复工作，学不了什么新东西。就是练练脑子。</p>
<p>　　AI还是让琪琪点醒的，&ldquo;如果发现要赢了就堵住&rdquo;，我原来的想法是想办法遍历棋局找出二连的棋子，都想到脑子疼了。明明反过来思考一下，如果往一个地方落子之后有人能赢，那这个地方不就是关键位置么，这样最多九次就能找到答案了。</p>
<p>　　留了一个找不出问题所在的小bug，随手用笨方法堵上了。</p>
<p>　　另外还是不知道怎么把无限while循环里面的Scanner关掉&hellip;&hellip;虽然只是警告不是错误，但是看着还是很不爽啊&hellip;&hellip;</p>
<p>　　<a title="jar文件打了个包" href="http://files.cnblos.com/JavaForNow/TicTacToeV2.0.rar" target="_blank">jar文件打了个包</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('05e5bb25-cc74-4273-b149-f898fef73be5')"><img id="code_img_closed_05e5bb25-cc74-4273-b149-f898fef73be5" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_05e5bb25-cc74-4273-b149-f898fef73be5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('05e5bb25-cc74-4273-b149-f898fef73be5',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_05e5bb25-cc74-4273-b149-f898fef73be5" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> ticTacToeII;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Client {
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {
</span><span style="color: #008080;"> 5</span>         Game game = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Game();
</span><span style="color: #008080;"> 6</span>         Player player = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Player();
</span><span style="color: #008080;"> 7</span>         Computer computer = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Computer();
</span><span style="color: #008080;"> 8</span>         
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">) {
</span><span style="color: #008080;">10</span> <span style="color: #000000;">            game.printChessBoard();
</span><span style="color: #008080;">11</span>             
<span style="color: #008080;">12</span> <span style="color: #000000;">            player.move(game);
</span><span style="color: #008080;">13</span> <span style="color: #000000;">            System.out.println();
</span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (game.checkWin()) {
</span><span style="color: #008080;">15</span> <span style="color: #000000;">                game.printChessBoard();
</span><span style="color: #008080;">16</span>                 System.out.println("你赢了!!!!!!!赢了啊啊啊啊啊啊啊啊啊啊啊啊！！！！"<span style="color: #000000;">);
</span><span style="color: #008080;">17</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">18</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">19</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (game.isFilled()) {
</span><span style="color: #008080;">20</span> <span style="color: #000000;">                game.printChessBoard();
</span><span style="color: #008080;">21</span>                 System.out.println("平局了。"<span style="color: #000000;">);
</span><span style="color: #008080;">22</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">24</span>             
<span style="color: #008080;">25</span>             System.out.print("电脑落子："<span style="color: #000000;">);
</span><span style="color: #008080;">26</span>             
<span style="color: #008080;">27</span> <span style="color: #000000;">            computer.move(game);
</span><span style="color: #008080;">28</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (game.checkWin()) {
</span><span style="color: #008080;">29</span>                 System.out.println(); <span style="color: #008000;">//</span><span style="color: #008000;"> 奇怪的bug，如果电脑赢了会出现打印错误，暂时用这个方法修补。</span>
<span style="color: #008080;">30</span> <span style="color: #000000;">                game.printChessBoard();
</span><span style="color: #008080;">31</span>                 System.out.println("电脑赢了!!!!!!!赢了啊啊啊啊啊啊啊啊啊啊啊啊！！！！"<span style="color: #000000;">);
</span><span style="color: #008080;">32</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">33</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">34</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (game.isFilled()) {
</span><span style="color: #008080;">35</span> <span style="color: #000000;">                game.printChessBoard();
</span><span style="color: #008080;">36</span>                 System.out.println("平局了。"<span style="color: #000000;">);
</span><span style="color: #008080;">37</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">38</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">39</span>                 
<span style="color: #008080;">40</span> <span style="color: #000000;">            System.out.println();
</span><span style="color: #008080;">41</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">42</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">43</span>     
<span style="color: #008080;">44</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 测试用跟踪方法。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">45</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> trace(String toShow) {
</span><span style="color: #008080;">46</span>         System.out.printf("===Traceback:%s===\n"<span style="color: #000000;">, toShow);
</span><span style="color: #008080;">47</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">48</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Client类</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('b70b09bc-7950-430d-8e3d-09a7c2f83b59')"><img id="code_img_closed_b70b09bc-7950-430d-8e3d-09a7c2f83b59" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_b70b09bc-7950-430d-8e3d-09a7c2f83b59" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b70b09bc-7950-430d-8e3d-09a7c2f83b59',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_b70b09bc-7950-430d-8e3d-09a7c2f83b59" class="cnblogs_code_hide">
<pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> ticTacToeII;
</span><span style="color: #008080;">  2</span> 
<span style="color: #008080;">  3</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Game {
</span><span style="color: #008080;">  4</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> String chessBoard;
</span><span style="color: #008080;">  5</span>     <span style="color: #0000ff;">private</span> String[][] pieces = <span style="color: #0000ff;">new</span> String[3][3<span style="color: #000000;">];
</span><span style="color: #008080;">  6</span>     
<span style="color: #008080;">  7</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 初始化棋盘样式和棋子数组。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">  8</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Game() {
</span><span style="color: #008080;">  9</span>         chessBoard = 
<span style="color: #008080;"> 10</span>                 "--------------   \n" +
<span style="color: #008080;"> 11</span>                 "| %s | %s | %s | \n" +
<span style="color: #008080;"> 12</span>                 "--------------   \n" +
<span style="color: #008080;"> 13</span>                 "| %s | %s | %s | \n" +
<span style="color: #008080;"> 14</span>                 "--------------   \n" +
<span style="color: #008080;"> 15</span>                 "| %s | %s | %s | \n" +
<span style="color: #008080;"> 16</span>                 "--------------   \n"<span style="color: #000000;">;
</span><span style="color: #008080;"> 17</span>         
<span style="color: #008080;"> 18</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (String[] s1: pieces) {
</span><span style="color: #008080;"> 19</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; s1.length; i++<span style="color: #000000;">)
</span><span style="color: #008080;"> 20</span>                 s1[i] = " "<span style="color: #000000;">;
</span><span style="color: #008080;"> 21</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 22</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 23</span>     
<span style="color: #008080;"> 24</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 在棋盘上落子。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 25</span>     <span style="color: #0000ff;">int</span> changeBoard(<span style="color: #0000ff;">int</span> row, <span style="color: #0000ff;">int</span><span style="color: #000000;"> column, String chessMan) {
</span><span style="color: #008080;"> 26</span>         <span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.pieces[row][column] == " "<span style="color: #000000;">) {
</span><span style="color: #008080;"> 27</span>             <span style="color: #0000ff;">this</span>.pieces[row][column] =<span style="color: #000000;"> chessMan;
</span><span style="color: #008080;"> 28</span>             <span style="color: #0000ff;">return</span> 1<span style="color: #000000;">;
</span><span style="color: #008080;"> 29</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 30</span>         <span style="color: #0000ff;">return</span> -1<span style="color: #000000;">;
</span><span style="color: #008080;"> 31</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 32</span>     
<span style="color: #008080;"> 33</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 棋子数组降维。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 34</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> String[] pieceList() {
</span><span style="color: #008080;"> 35</span>         String[] temp = <span style="color: #0000ff;">new</span> String[9<span style="color: #000000;">];
</span><span style="color: #008080;"> 36</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0, j = 0; i &lt; 3; i++, j += 3<span style="color: #000000;">)
</span><span style="color: #008080;"> 37</span>             System.arraycopy(<span style="color: #0000ff;">this</span>.pieces[i], 0, temp, j, 3<span style="color: #000000;">);
</span><span style="color: #008080;"> 38</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> temp;
</span><span style="color: #008080;"> 39</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 40</span>     
<span style="color: #008080;"> 41</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 打印棋盘。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 42</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> printChessBoard() {
</span><span style="color: #008080;"> 43</span>         System.out.printf(<span style="color: #0000ff;">this</span>.chessBoard, (Object[])<span style="color: #0000ff;">this</span><span style="color: #000000;">.pieceList());
</span><span style="color: #008080;"> 44</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 45</span>     
<span style="color: #008080;"> 46</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 判断平局。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 47</span>     <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isFilled() {
</span><span style="color: #008080;"> 48</span>         <span style="color: #0000ff;">for</span> (String[] s1: <span style="color: #0000ff;">this</span><span style="color: #000000;">.pieces) {
</span><span style="color: #008080;"> 49</span>             <span style="color: #0000ff;">for</span><span style="color: #000000;"> (String s2: s1) {
</span><span style="color: #008080;"> 50</span>                 <span style="color: #0000ff;">if</span> (s2 == " "<span style="color: #000000;">)
</span><span style="color: #008080;"> 51</span>                     <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 52</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 54</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 55</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 56</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 判断胜利。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 57</span>     <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> checkWin() {
</span><span style="color: #008080;"> 58</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 3; i++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 59</span>             <span style="color: #0000ff;">if</span> ((<span style="color: #0000ff;">this</span>.pieces[i][0] == <span style="color: #0000ff;">this</span>.pieces[i][1] &amp;&amp; 
<span style="color: #008080;"> 60</span>                 <span style="color: #0000ff;">this</span>.pieces[i][1] == <span style="color: #0000ff;">this</span>.pieces[i][2] &amp;&amp; 
<span style="color: #008080;"> 61</span>                 <span style="color: #0000ff;">this</span>.pieces[i][1] != " "<span style="color: #000000;">)
</span><span style="color: #008080;"> 62</span>                 ||
<span style="color: #008080;"> 63</span>                 (<span style="color: #0000ff;">this</span>.pieces[0][i] == <span style="color: #0000ff;">this</span>.pieces[1][i] &amp;&amp; 
<span style="color: #008080;"> 64</span>                 <span style="color: #0000ff;">this</span>.pieces[1][i] == <span style="color: #0000ff;">this</span>.pieces[2][i] &amp;&amp;
<span style="color: #008080;"> 65</span>                 <span style="color: #0000ff;">this</span>.pieces[1][i] != " "<span style="color: #000000;">))
</span><span style="color: #008080;"> 66</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 67</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 68</span>         <span style="color: #0000ff;">if</span> ((<span style="color: #0000ff;">this</span>.pieces[0][0] == <span style="color: #0000ff;">this</span>.pieces[1][1] &amp;&amp;
<span style="color: #008080;"> 69</span>             <span style="color: #0000ff;">this</span>.pieces[1][1] == <span style="color: #0000ff;">this</span>.pieces[2][2] &amp;&amp;
<span style="color: #008080;"> 70</span>             <span style="color: #0000ff;">this</span>.pieces[1][1] != " "<span style="color: #000000;">)
</span><span style="color: #008080;"> 71</span>             ||
<span style="color: #008080;"> 72</span>             (<span style="color: #0000ff;">this</span>.pieces[2][0] == <span style="color: #0000ff;">this</span>.pieces[1][1] &amp;&amp;
<span style="color: #008080;"> 73</span>             <span style="color: #0000ff;">this</span>.pieces[1][1] == <span style="color: #0000ff;">this</span>.pieces[0][2] &amp;&amp;
<span style="color: #008080;"> 74</span>             <span style="color: #0000ff;">this</span>.pieces[1][1] != " "<span style="color: #000000;">))
</span><span style="color: #008080;"> 75</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 76</span>         
<span style="color: #008080;"> 77</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 79</span>     
<span style="color: #008080;"> 80</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 方法重载，接受一个棋子数组的拷贝，判断此情况下能否胜利。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 81</span>     <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> checkWin(String[][] list) {
</span><span style="color: #008080;"> 82</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 3; i++<span style="color: #000000;">) {
</span><span style="color: #008080;"> 83</span>             <span style="color: #0000ff;">if</span> ((list[i][0] == list[i][1] &amp;&amp; 
<span style="color: #008080;"> 84</span>                 list[i][1] == list[i][2] &amp;&amp; 
<span style="color: #008080;"> 85</span>                 list[i][1] != " "<span style="color: #000000;">)
</span><span style="color: #008080;"> 86</span>                 ||
<span style="color: #008080;"> 87</span>                 (list[0][i] == list[1][i] &amp;&amp; 
<span style="color: #008080;"> 88</span>                 list[1][i] == list[2][i] &amp;&amp;
<span style="color: #008080;"> 89</span>                 list[1][i] != " "<span style="color: #000000;">))
</span><span style="color: #008080;"> 90</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 92</span>         <span style="color: #0000ff;">if</span> ((list[0][0] == list[1][1] &amp;&amp;
<span style="color: #008080;"> 93</span>             list[1][1] == list[2][2] &amp;&amp;
<span style="color: #008080;"> 94</span>             list[1][1] != " "<span style="color: #000000;">)
</span><span style="color: #008080;"> 95</span>             ||
<span style="color: #008080;"> 96</span>             (list[2][0] == list[1][1] &amp;&amp;
<span style="color: #008080;"> 97</span>             list[1][1] == list[0][2] &amp;&amp;
<span style="color: #008080;"> 98</span>             list[1][1] != " "<span style="color: #000000;">))
</span><span style="color: #008080;"> 99</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">100</span>         
<span style="color: #008080;">101</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">102</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">103</span>     
<span style="color: #008080;">104</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 返回一个棋子数组的拷贝。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">105</span> <span style="color: #000000;">    String[][] piecesCopy() {
</span><span style="color: #008080;">106</span>         String[][] copy = <span style="color: #0000ff;">new</span> String[3][3<span style="color: #000000;">];
</span><span style="color: #008080;">107</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 3; i++<span style="color: #000000;">) {
</span><span style="color: #008080;">108</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = 0; j &lt; 3; j++<span style="color: #000000;">)    {
</span><span style="color: #008080;">109</span>                 copy[i][j] = <span style="color: #0000ff;">this</span><span style="color: #000000;">.pieces[i][j];
</span><span style="color: #008080;">110</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">111</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">112</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> copy;
</span><span style="color: #008080;">113</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">114</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Game类</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('eac2a1cf-8a5f-4191-be6e-fb241331764c')"><img id="code_img_closed_eac2a1cf-8a5f-4191-be6e-fb241331764c" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_eac2a1cf-8a5f-4191-be6e-fb241331764c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('eac2a1cf-8a5f-4191-be6e-fb241331764c',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_eac2a1cf-8a5f-4191-be6e-fb241331764c" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> ticTacToeII;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Computer {
</span><span style="color: #008080;"> 4</span>     
<span style="color: #008080;"> 5</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 电脑落子。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> move(Game game) {
</span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">int</span><span style="color: #000000;"> row, column;
</span><span style="color: #008080;"> 8</span>         
<span style="color: #008080;"> 9</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 如果有关键点就落在那。</span>
<span style="color: #008080;">10</span>         <span style="color: #0000ff;">if</span> (getCriticalPoint(game)[0] != -1<span style="color: #000000;">) {
</span><span style="color: #008080;">11</span>             row = getCriticalPoint(game)[0<span style="color: #000000;">];
</span><span style="color: #008080;">12</span>             column = getCriticalPoint(game)[1<span style="color: #000000;">];
</span><span style="color: #008080;">13</span>             game.changeBoard(row, column, "&times;"<span style="color: #000000;">);
</span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">15</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">16</span>         
<span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 否则就随机产生位置。</span>
<span style="color: #008080;">18</span>         <span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">) {
</span><span style="color: #008080;">19</span>             row = (<span style="color: #0000ff;">int</span>) (Math.random() * 3<span style="color: #000000;">);
</span><span style="color: #008080;">20</span>             column = (<span style="color: #0000ff;">int</span>) (Math.random() * 3<span style="color: #000000;">);
</span><span style="color: #008080;">21</span>             <span style="color: #0000ff;">if</span> (game.changeBoard(row, column, "&times;") == -1<span style="color: #000000;">)
</span><span style="color: #008080;">22</span>                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span>             <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">24</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">25</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">26</span>     
<span style="color: #008080;">27</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 找出并返回棋盘上的关键点。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">28</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">[] getCriticalPoint(Game game) {
</span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">int</span>[] coordinate = {-1, -1<span style="color: #000000;">};
</span><span style="color: #008080;">30</span>         String[][] copy =<span style="color: #000000;"> game.piecesCopy();
</span><span style="color: #008080;">31</span>         String[] chessman = {"&times;", "○"}; <span style="color: #008000;">//</span><span style="color: #008000;"> 顺序反了的话即使能赢也会优先堵玩家。</span>
<span style="color: #008080;">32</span> <span style="color: #000000;">        String temp;
</span><span style="color: #008080;">33</span>         
<span style="color: #008080;">34</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> 拷贝棋盘并遍历，找出落子后能胜利的点，不管是哪一方胜利。</span>
<span style="color: #008080;">35</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 3; i++<span style="color: #000000;">) {
</span><span style="color: #008080;">36</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = 0; j &lt; 3; j++<span style="color: #000000;">) {
</span><span style="color: #008080;">37</span>                 <span style="color: #0000ff;">for</span><span style="color: #000000;"> (String s: chessman) {
</span><span style="color: #008080;">38</span>                     <span style="color: #0000ff;">if</span> (copy[i][j] != " ") <span style="color: #008000;">//</span><span style="color: #008000;"> 位置占用了就直接跳过不废话。</span>
<span style="color: #008080;">39</span>                         <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">40</span>                     temp =<span style="color: #000000;"> copy[i][j];
</span><span style="color: #008080;">41</span>                     copy[i][j] =<span style="color: #000000;"> s;
</span><span style="color: #008080;">42</span>                     <span style="color: #0000ff;">if</span><span style="color: #000000;"> (game.checkWin(copy)) {
</span><span style="color: #008080;">43</span>                         coordinate[0] =<span style="color: #000000;"> i;
</span><span style="color: #008080;">44</span>                         coordinate[1] =<span style="color: #000000;"> j;
</span><span style="color: #008080;">45</span>                         <span style="color: #0000ff;">return</span><span style="color: #000000;"> coordinate;
</span><span style="color: #008080;">46</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">47</span>                     copy[i][j] =<span style="color: #000000;"> temp;
</span><span style="color: #008080;">48</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">49</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">50</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">51</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> coordinate;
</span><span style="color: #008080;">52</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">53</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Computer类</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('c5d23d92-728a-4725-9bd8-1180f64dec4f')"><img id="code_img_closed_c5d23d92-728a-4725-9bd8-1180f64dec4f" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_c5d23d92-728a-4725-9bd8-1180f64dec4f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c5d23d92-728a-4725-9bd8-1180f64dec4f',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_c5d23d92-728a-4725-9bd8-1180f64dec4f" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> ticTacToeII;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Player {
</span><span style="color: #008080;"> 4</span>     
<span style="color: #008080;"> 5</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 玩家落子。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;"> 6</span>     @SuppressWarnings("resource"<span style="color: #000000;">)
</span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> move(Game game) {
</span><span style="color: #008080;"> 8</span>         
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">) {
</span><span style="color: #008080;">10</span>             java.util.Scanner input = <span style="color: #0000ff;">new</span><span style="color: #000000;"> java.util.Scanner(System.in);
</span><span style="color: #008080;">11</span>             
<span style="color: #008080;">12</span>             System.out.print("请输入行数(1-3):"<span style="color: #000000;">);
</span><span style="color: #008080;">13</span>             String row =<span style="color: #000000;"> input.next();
</span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">isValid(row))
</span><span style="color: #008080;">15</span>                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">16</span>             System.out.print("请输入列数(1-3):"<span style="color: #000000;">);
</span><span style="color: #008080;">17</span>             String column =<span style="color: #000000;"> input.next();
</span><span style="color: #008080;">18</span>             <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">isValid(column))
</span><span style="color: #008080;">19</span>                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">20</span>             
<span style="color: #008080;">21</span>             <span style="color: #0000ff;">int</span> r = Integer.parseInt(row) - 1<span style="color: #000000;">;
</span><span style="color: #008080;">22</span>             <span style="color: #0000ff;">int</span> c = Integer.parseInt(column) - 1<span style="color: #000000;">;
</span><span style="color: #008080;">23</span>             
<span style="color: #008080;">24</span>             <span style="color: #0000ff;">if</span> (game.changeBoard(r, c, "○") == -1<span style="color: #000000;">) {
</span><span style="color: #008080;">25</span>                 System.out.println("这里有子了。\n"<span style="color: #000000;">);
</span><span style="color: #008080;">26</span>                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">27</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">28</span>             
<span style="color: #008080;">29</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">30</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">31</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">32</span>     
<span style="color: #008080;">33</span>     <span style="color: #008000;">/**</span><span style="color: #008000;"> 检查玩家输入。</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">34</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isValid(String userInput) {
</span><span style="color: #008080;">35</span>         <span style="color: #0000ff;">if</span> (userInput.matches("[123]{1}"<span style="color: #000000;">))
</span><span style="color: #008080;">36</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">38</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">39</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">40</span> }</pre>
</div>
<span class="cnblogs_code_collapse">Player类</span></div>
<p>&nbsp;</p>

<p align=right><span style="font-size: 12px">——本文由博客园搬家工具<a href="https://github.com/mlxy/SRBCnblogs">SRBCnblogs</a>转换而成</span></p>