---
layout: post
title: 再写记事本抠眼珠子
date: 2014-01-27 11:57:00
categories: cnblogs
---

<p>　　极速启动！绝对精简！</p>
<p>　　完全没有广告条和推送消息！</p>
<p>　　完全没有开机自启和后台自启！</p>
<p>　　完全没有偷偷耗电和偷偷联网！</p>
<p>　　完全没有那个技术呃含量。</p>
<p>&nbsp;</p>
<p>　　我想想有没有什么好说的哈。</p>
<p>&nbsp;</p>
<p>　　默认情况下应用窗口最上边是有一个很难看的又粗又黑的标题栏的，要改的话改主题就好了，方法是在AndroidManifest.xml文件里的application标签下加上一句</p>
<div class="cnblogs_code">
<pre>android:theme="@android:style/Theme.NoTitleBar"</pre>
</div>
<p>　　主题的名字已经说明作用了，如果在Theme.NoTitleBar后面再加上.Fullscreen的话连通知栏都可以隐藏，很方便。</p>
<p>　　在application标签下改的话是应用于所有活动(Activity)的，只想用在单个活动上的话加到activity标签里就可以了。</p>
<p>&nbsp;</p>
<p>　　保存数据有三加一种方法，最后一个我忘了，然后sqlite我还没学，说说我这次用的。</p>
<p>　　需要的是SharedPreferences这个直接翻译过来叫共享的偏好这种奇怪而似乎跟它的用处毫无关系的类，用法分写和读两部分。</p>
<p>　　数据是用XML文件来存储的键值对。</p>
<p>&nbsp;</p>
<p>　　<strong><span style="font-size: 16px;">写：</span></strong></p>
<p>　　　　使用context.getPreferences()这个方法，context指的是背景活动，一般用this关键字就行。</p>
<p>　　　　另外括号里接收一个参数，指的是打开方式，有六种可选，MODE_PRIVATE是只有当前应用可以访问，改成MODE_WORLD_READ/WRITE就是其他应用也可以访问。</p>
<p>　　　　其实没什么必要。</p>
<p>　　　　之后要用这个类下的一个类，SharedPrefrences.Editor来进行写操作，初始化的方式是用上面初始化的类下的edit()方法，这个方法返回一个Editor。</p>
<p>　　　　Editor包含写入六种基本数据类型的方法，不过不是setXXX，是putXXX，方法接收两个参数，第一个是键，第二个是值。</p>
<p>　　　　最后，写完之后要用commit()方法来确认写入，不然会不会有问题我也不知道。</p>
<p>　　　　来举个例子：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('cf6fb17a-305e-4bfa-9ce3-d12829eea8d5')"><img id="code_img_closed_cf6fb17a-305e-4bfa-9ce3-d12829eea8d5" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_cf6fb17a-305e-4bfa-9ce3-d12829eea8d5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('cf6fb17a-305e-4bfa-9ce3-d12829eea8d5',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_cf6fb17a-305e-4bfa-9ce3-d12829eea8d5" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #000000;">@Override
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> onPause() {
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">super</span><span style="color: #000000;">.onPause();
</span><span style="color: #008080;"> 4</span>     
<span style="color: #008080;"> 5</span>     EditText textView =<span style="color: #000000;"> (EditText) findViewById(R.id.editText1);
</span><span style="color: #008080;"> 6</span>     String content =<span style="color: #000000;"> textView.getText().toString();
</span><span style="color: #008080;"> 7</span>     SharedPreferences sharedPref = <span style="color: #0000ff;">this</span><span style="color: #000000;">.getPreferences(MODE_PRIVATE);
</span><span style="color: #008080;"> 8</span>     Editor editor =<span style="color: #000000;"> sharedPref.edit();
</span><span style="color: #008080;"> 9</span>     
<span style="color: #008080;">10</span>     editor.putString("content"<span style="color: #000000;">, content);
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    editor.commit();
</span><span style="color: #008080;">12</span> }</pre>
</div>
<span class="cnblogs_code_collapse">获取文本框内容并保存到xml</span></div>
<p>&nbsp;</p>
<p><strong><span style="font-size: 16px;">　　读：</span></strong></p>
<p>　　　　读的过程更好懂，比写还少了Editor。</p>
<p>　　　　用同样的方法取得了SharedPreferences之后，使用基本数据类型的get方法就可以了。</p>
<p>　　　　需要注意一下，get方法接收两个参数，第一个是自然是键，第二个则是默认内容，就是在键并不存在的情况下返回的内容。</p>
<p>　　　　这个参数很方便，节省下了一条判断语句。</p>
<p>　　　　像这样：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('830bdda7-6a15-49e2-beab-a16569f1c32b')"><img id="code_img_closed_830bdda7-6a15-49e2-beab-a16569f1c32b" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_830bdda7-6a15-49e2-beab-a16569f1c32b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('830bdda7-6a15-49e2-beab-a16569f1c32b',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_830bdda7-6a15-49e2-beab-a16569f1c32b" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #000000;">@Override
</span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> onCreate(Bundle savedInstanceState) {
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">super</span><span style="color: #000000;">.onCreate(savedInstanceState);
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    setContentView(R.layout.activity_main);
</span><span style="color: #008080;"> 5</span>     
<span style="color: #008080;"> 6</span>     SharedPreferences sharedPref = <span style="color: #0000ff;">this</span><span style="color: #000000;">.getPreferences(MODE_PRIVATE);
</span><span style="color: #008080;"> 7</span>     String savedContent = sharedPref.getString("content", ""<span style="color: #000000;">);
</span><span style="color: #008080;"> 8</span>     EditText textView =<span style="color: #000000;"> (EditText) findViewById(R.id.editText1);
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    textView.setText(savedContent);
</span><span style="color: #008080;">10</span> }</pre>
</div>
<span class="cnblogs_code_collapse">记得要先设置视图再改内容</span></div>
<p>&nbsp;</p>
<p>　　</p>
<p>　　<a href="http://files.cnblogs.com/JavaForNow/Notepadroid.rar">APK以及工程文件</a></p>

<div align=right><a href="https://github.com/mlxy/SRBCnblogs"><font size=1>——本文由博客园搬家工具SRBCnblogs转换而成</font></a></div>